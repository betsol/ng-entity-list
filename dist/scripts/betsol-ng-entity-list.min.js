/**
 * betsol-ng-entity-list - Automatic entity lists for Angular.js
 * @version v0.0.0
 * @link https://github.com/betsol/ng-entity-list
 * @license MIT
 *
 * @author Slava Fomin II <s.fomin@betsol.ru>
 */
!function(e,t){"use strict";function i(e){return e=t.extend({},n,e),t.forEach(e.fields,function(i,n){e.fields[n]=t.extend({},o,i)}),e}var n={title:"",fields:{},add:!0,edit:!0,"delete":!0},o={title:"",type:"string"},s=50;t.module("betsol.entityList",["ui.router","betsol.paginator"]).factory("EntityList",["Paginator",function(t){return function(n){if(!n.scope)return console.log("Missing scope");if(!n.baseStateName)return console.log("Missing base state name");if(!n.repository)return console.log("Missing repository");var o=n.scope,r=n.repository,a=i(n.scheme||{}),c=new t(r.find).setItemsPerPage(n.itemsPerPage||s);c.first(),o.baseStateName=n.baseStateName,o.scheme=a,o.paginator=c,a.delete&&(o.delete=function(t){e.confirm("Вы уверены, что хотите удалить «"+t.title+"»?")&&r.delete(t.id).then(function(){c.first()}).catch(function(){alert("Не удалось удалить запись")})})}}])}(window,angular);